<!DOCTYPE html>
<HTML>
<HEAD>
    <meta http-equiv="Cache-control" content="no-cache"><meta http-equiv="Expires" content="0">
    <script type="text/javascript" src="http://code.jquery.com/jquery-1.11.2.min.js"></script>
    <script>

function callConfig()
{
    var curip = document.getElementById("curip").value;
    var ip = document.getElementById("ip").value;
    var gwip = document.getElementById("gw").value;
    var snip = document.getElementById("sn").value;
    var ssid = document.getElementById("ssid").value;
    var wlanpwd = document.getElementById("wlanpwd").value;

    if(!ipOK(curip))
        curip = "192.168.4.1";
    if(!ipOK(ip))
        ip = "192.168.1.111";

    if(!ipOK(gwip))
        gwip = "192.168.1.40";

    if(!ipOK(ssid))
        contentip = "255.255.255.0";
    
    window.open("http://"+curip+'/wifisave?s='+ssid+'&p='+wlanpwd+'&ip='+ip+'&gw='+gwip+'&sn='+snip);
	console.log("http://"+curip+'/wifisave?s='+ssid+'&p='+wlanpwd+'&ip='+ip+'&gw='+gwip+'&sn='+snip);
}

function ipOK(ip_string)
{
    var splitted = ip_string.split();

    for(var i =0; i < splitted.length; i++)
    {
        if(splitted[i] < 1 || splitted[i] > 254)
            return false;
    }
    return true;
}
    </script>
    <TITLE>CONFIG UltraSwitch</TITLE>
</HEAD>
<BODY>

<form onsubmit="return callConfig()">
    <h1>Welcome to the quick n diry configurator for the ESP_Accesspoint!</h1></br></br>
   <div>(0) Current IP-Adress of the AP e.g. 192.168.4.1 (no spaces, "."-separated) ---> <input type="text" id="curip" size="30" value="192.168.4.1"></div></br>
   <div>(1) IP-Adress of the Controller e.g. 192.168.1.111 (no spaces, "."-separated) ---> <input type="text" id="ip" size="30" value="192.168.1.111"></div></br>
   <div>(2) IP-Adress of your Internet-Gateway(router) e.g. 192.168.1.44 (no spaces, "."-separated) ---> <input type="text" id="gw" size="30" value="192.168.1.40"></div></br>
   <div>(3) IP-Adress SubNetMask 255.255.255.0 ---> <input type="text" id="sn" size="30" value="255.255.255.0"></div></br>
   <div>(4) SSID ---> <input type="text" id="ssid" size="30" value="SSID"></div></br>
   <div>(5) WLANPWD <input type="text" id="wlanpwd" size="30" value="WLAN-PWD"></div></br></br>
   <h2>BE CAREFUL WHAT YOU DO!! DOUBLECHECK TWICE BEFORE CLICKING SUBMIT :P</h2></br></br>
   <input id="submitBtn" type="submit" name="submit" value="Submit">
</form>  
</BODY>
</HTML>